<!DOCTYPE html>
<html>
<head>
  <title>Test Image Rendering</title>
  <style>
    body {
      font-family: monospace;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-section {
      margin: 20px 0;
      padding: 20px;
      background: white;
      border-radius: 8px;
    }
    svg {
      border: 2px solid #ddd;
      margin: 10px 0;
      background: white;
    }
    pre {
      background: #f0f0f0;
      padding: 10px;
      overflow: auto;
    }
  </style>
</head>
<body>
  <h1>Image Rendering Test</h1>

  <div class="test-section">
    <h2>Test 1: Direct Image Reference</h2>
    <p>直接使用 image 元素</p>
    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
      <rect width="400" height="300" fill="#f0f0f0"/>
      <image
        href="https://raw.githubusercontent.com/guychienll/pen-diff/refs/heads/main/232543043.jpeg"
        x="0"
        y="0"
        width="400"
        height="300"
        preserveAspectRatio="xMidYMid slice"/>
    </svg>
  </div>

  <div class="test-section">
    <h2>Test 2: Pattern Fill (objectBoundingBox)</h2>
    <p>使用 pattern 填充 - objectBoundingBox</p>
    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="img1" width="100%" height="100%" patternContentUnits="objectBoundingBox">
          <image
            href="https://raw.githubusercontent.com/guychienll/pen-diff/refs/heads/main/232543043.jpeg"
            width="1"
            height="1"
            preserveAspectRatio="xMidYMid slice"/>
        </pattern>
      </defs>
      <rect x="0" y="0" width="400" height="300" fill="url(#img1)"/>
    </svg>
  </div>

  <div class="test-section">
    <h2>Test 3: Pattern Fill (userSpaceOnUse)</h2>
    <p>使用 pattern 填充 - userSpaceOnUse</p>
    <svg width="400" height="300" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <pattern id="img2" x="0" y="0" width="400" height="300" patternUnits="userSpaceOnUse">
          <image
            href="https://raw.githubusercontent.com/guychienll/pen-diff/refs/heads/main/232543043.jpeg"
            x="0"
            y="0"
            width="400"
            height="300"
            preserveAspectRatio="xMidYMid slice"/>
        </pattern>
      </defs>
      <rect x="0" y="0" width="400" height="300" fill="url(#img2)"/>
    </svg>
  </div>

  <div class="test-section">
    <h2>Test 4: Image URL Test</h2>
    <p>測試圖片 URL 是否可訪問</p>
    <img
      src="https://raw.githubusercontent.com/guychienll/pen-diff/refs/heads/main/232543043.jpeg"
      width="400"
      onerror="this.parentElement.innerHTML += '<p style=color:red>❌ 圖片載入失敗</p>'"
      onload="this.parentElement.innerHTML += '<p style=color:green>✅ 圖片載入成功</p>'"
    />
  </div>

  <div class="test-section">
    <h2>Console Output</h2>
    <p>打開 DevTools Console 查看詳細信息</p>
    <pre id="log"></pre>
  </div>

  <script>
    const log = document.getElementById('log');
    function addLog(msg) {
      log.textContent += msg + '\n';
      console.log(msg);
    }

    // Test image loading
    const testUrl = 'https://raw.githubusercontent.com/guychienll/pen-diff/refs/heads/main/232543043.jpeg';

    addLog('Testing image URL: ' + testUrl);

    fetch(testUrl, { method: 'HEAD' })
      .then(response => {
        addLog(`✅ Image accessible: ${response.status} ${response.statusText}`);
        addLog(`Content-Type: ${response.headers.get('content-type')}`);
        addLog(`Content-Length: ${response.headers.get('content-length')} bytes`);
      })
      .catch(error => {
        addLog(`❌ Error: ${error.message}`);
      });
  </script>
</body>
</html>
